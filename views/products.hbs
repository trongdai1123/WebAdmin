<div class="panel panel-default">
    <div class="panel-heading">
        Striped Rows
    </div>
    <div class="panel-body">
        <div class="row">
            <a class="btn btn-link" href="/dang-xuat"> Logout </a>

        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Mã Sản Phẩm</th>
                        <th>Tên Sản Phẩm</th>
                        <th>Giá</th>
                        <th>Hình ảnh</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each products}}
                    <tr>
                        <td>{{this._id}}</td>
                        <td>
                            <a href="/san-pham/chi-tiet/{{this._id}}">{{this.name}}</a>
                        </td>
                        <td>{{this.price}}</td>
                        <td>
                            <img src="{{this.image}}" alt="Hình Ảnh" width="70" height="70" />
                        </td>
                        <td>
                            <a href="#" class="btn btn-link" onclick="onRemove('{{this._id}}')"> Xóa</a>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Modal Heading</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <input type="text" class="form-control form-control-lg mb-3" placeholder="Firstname">
                <input type="text" class="form-control form-control-lg mb-3" placeholder="Lastname">
                <input type="email" class="form-control form-control-lg mb-3" id="email" placeholder="Enter email"
                    name="email">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="check1" name="option1" value="something"
                        checked>
                    <label class="form-check-label">Option 1</label>
                </div>
                <button type="button" class="btn btn-success">Success</button>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>

<script>
    const onRemove = id => {
        swal({
            title: "Are you sure?",
            text: "Once deleted, you will not be able to recover ",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    const url = `/san-pham/xoa/${id}`;
                    fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }).then(res => res.json())
                        .then(data => {
                            swal("Poof! Your imaginary file has been deleted!", {
                                icon: "success",
                            });
                          window.location.reload();
                        });
                } 
    });
    }
</script>